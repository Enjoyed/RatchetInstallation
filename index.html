<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
	</head>
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/css/custom.css">
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
	<body>
		<div class="container-fluid">
		<!-- PRIMERA LINIA (dispositiu 1 - 6) -->
		<!-- COMENÇAMENT DISPOSITIU 1 -->
			<div class="row biggerrow">
				<div class="col-md-2">
					<h3>
						Dispositiu 1
					</h3>
					<div class="row">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d1_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center" align="center">
							<a class="btn btn-danger" id="d1_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d1_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d1_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d1_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d1_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d1_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
				<!-- FI DISPOSITIU 1 -->
				<!-- COMENÇAMENT DISPOSITIU 2 -->
				<div class="col-md-2">
					<h3>
						Dispositiu 2
					</h3>
					<div class="row">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d2_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d2_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
				<!-- FI DISPOSITIU 2 -->
				<!-- COMENÇAMENT DISPOSITIU 3 -->
				<div class="col-md-2">
					<h3>
						Dispositiu 3
					</h3>
					<div class="row">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d3_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d3_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
				<!-- FI DISPOSITIU 3 -->
				<!-- COMENÇAMENT DISPOSITIU 4 -->
				<div class="col-md-2">
					<h3>
						Dispositiu 4
					</h3>
					<div class="row">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d4_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d4_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
				<!-- FI DISPOSITIU 4 -->
				<!-- COMENÇAMENT DISPOSITIU 5 -->
				<div class="col-md-2">
					<h3>
						Dispositiu 5
					</h3>
					<div class="row">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d5_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d5_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
				<!-- FI DISPOSITIU 5 -->
				<!-- COMENÇAMENT DISPOSITIU 6 -->
				<div class="col-md-2">
					<h3>
						Dispositiu 6
					</h3>
					<div class="row lastrow">
						<div class="col-md-8">
							<p>
								<span>Temperatura:<span>
							</p>
						</div>
						<div class="col-md-4">
							<p id="d6_temperatura" tipo="sensor">
								0
							</p>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7">
							 <p>
								LED1
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led1" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7"  style="font-size: 1em">
							 <p>
								LED2
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led2" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7">
							 <p>
								LED3
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led3" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7">
							 <p>
								LED4
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led4" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7">
							 <p>
								LED5
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led5" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
					<div class="row lastrow">
						<div class="col-md-7">
							 <p>
								LED6
							 </p>
						</div>
						<div class="col-md-5" align="center">
							<a class="btn btn-danger" id="d6_led6" tipo="onoff">
								OFF
							</a>
						</div>
					</div>
				</div>
			</div>
			<!-- SEGONA LINIA (dispositiu 7 - 12) -->
			<div class="row biggerrow">
				<div class="col-md-2">
					<h3>
						Dispositiu 7
					</h3>
				</div>
				<div class="col-md-2">
					<h3>
						Dispositiu 8
					</h3>
				</div>
				<div class="col-md-2">
					<h3>
						Dispositiu 9
					</h3>
				</div>
				<div class="col-md-2">
					<h3>
						Dispositiu 10
					</h3>
				</div>
				<div class="col-md-2">
					<h3>
						Dispositiu 11
					</h3>
				</div>
				<div class="col-md-2">
					<h3>
						Dispositiu 12
					</h3>
				</div>
			</div>
		</div>
	<script>
	var conn = new WebSocket("ws://10.19.250.1:8080");
	conn.onopen = function(e) {
		console.log("Connection established!");
	};
	conn.onmessage = function(e) {
		console.log("Updating...");
		Data = JSON.parse(e.data);
		for (var prop in Data) {
			var element = document.getElementById(prop);
			var type = $(element).attr("tipo");
			if(type == "onoff") {
				switch(Data[prop]) {
					case 0:
						element.innerHTML = "OFF";
						element.classList.remove("btn-success");
						element.classList.add("btn-danger");
						break;
					case 1:
						element.innerHTML = "ON";
						element.classList.remove("btn-danger");
						element.classList.add("btn-success");
						break;
					case "0":
						element.innerHTML = "OFF";
						element.classList.remove("btn-success");
						element.classList.add("btn-danger");
						break;
					case "1":
						element.innerHTML = "ON";
						element.classList.remove("btn-danger");
						element.classList.add("btn-success");
						break;
				}
			}
			else if(type == "sensor")
			{
				element.innerHTML = Data[prop];
			}
		}
	}
	function changeClass()
		{
			var nom = $(this).attr("id");
			if(this.innerHTML == "ON"){
				var valor = 0;
			}
			else if(this.innerHTML == "OFF"){
				var valor = 1;
			}
			sendMessage(nom,valor);
			$(this).toggleClass("btn-success");
			$(this).toggleClass("btn-danger");
			if(this.innerHTML == "ON"){
					this.innerHTML = "OFF";
			}
			else{
					this.innerHTML = "ON";
			}
		}
	window.onload = function()
	{
		$("a").each( function(index, element){
			$(this).bind("click",changeClass);
		});
	}
	function sendMessage(text, valor) {
		var json = "{\"" + text + "\":" + valor + "}";
		conn.send(json);
		console.log(json);
	}
	</script>
	</body>
</html>
